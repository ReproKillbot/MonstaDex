<attacks_list>
  <div class="container">
    <div>
      <h1>Attacks</h1>
      <div class="d-flex flex-row justify-content-center">
        <div class="radio">
          <label><input class="name" type="radio" name="radio" onclick={searchBy('name')}>Search by Name</label>
        </div>
        <div class="radio">
          <label><input type="radio" name="radio" onclick={searchBy('element')}>Search by Element</label>
        </div>
        <div class="radio">
          <label><input type="radio" name="radio" onclick={searchBy('myMonsters')}>Attacks My Monsters Have</label>
        </div>
      </div>
      <div class="md-form mt-0 search">
        <input class="monster_search form-control-sm ml-3 w-75" placeholder="Search by Element" id="filterMyMonsters" type="text" value=''>
<!--        {get_attacks_my_monsters_have}-->
      </div>
    </div>
    <table class="table text-center">
   <thead>
     <tr>
       <th scope="col">Id</th>
       <th scope="col">Name</th>
       <th scope="col">Element</th>
       <th scope="col">Description</th>
     </tr>
   </thead>
   <tbody>
     <tr each='{attack in attacks}'>
       <td>{attack.id}</td>
       <td>{attack.name}</td>
       <td><img src="{attack.image}">{attack.element}</td>
       <td>{attack.description}</td>
     </tr>
   </tbody>
   </table>
  </div>
  <script>
  var self = this
  self.attacks = {}
  self.monster = self.opts.mon
  self.id = self.opts.id
  self.typeOfSearch = 'name'
  self.on('mount', function(){
      get_attacks();
      $('.monster_search').focus(function() {
          get_attacks();
<!--        console.log(self.monstersearch[0].value)-->
     });
      $('.monster_search').on('change', function(){
         self.performSearch();
      })
  })


   self.searchBy = function(newType){
     return function(e){
     self.typeOfSearch = newType
    }

  }

    self.performSearch = function(){
     switch (self.typeOfSearch){
        case 'name':
          filterName();
          break;
        case 'element':
          filterMonsters();
          break;
        case 'myMonsters':
          filterMyMonsters()
          break;
         }
      }

  var get_attacks = function(){
      CLIENT.api.get_attacks()
          .done(function(attacks){
              self.attacks = attacks
          })
          .fail(function(error){
              alert(error.responseJSON)
          })
          .always(function(){
              self.update()
          })
  }
   var filterMonsters = function(){
   console.log($('.monster_search')[0].value)
   CLIENT.api.get_attacks_by_type($('.monster_search')[0].value)
     .done(function(attacks){
         self.attacks = self.attacks
     })
     .fail(function(error){
         alert(error.responseJSON)
     })
     .always(function(){
         self.update()
     })
   }

   var filterName = function(){
     CLIENT.api.get_attacks_by_name($('.monster_search')[0].value)
     .done(function(attacks){
         self.attacks = attacks
     })
     .fail(function(error){
         alert(error.responseJSON)
     })
     .always(function(){
         self.update()
     })
   }

    var filterMyMonsters = function(){
     CLIENT.api.get_attacks_my_monsters_have($('.monster_search')[0].value)
     .done(function(attacks){
         self.attacks = attacks
         console.log(self.attacks[5].name)

     })
     .fail(function(error){
         alert(error.responseJSON)
     })
     .always(function(){
         self.update()
     })
   }


      var attack_name = function() {
        self.filterMyMonsters();
     }
     console.log(self.mon_attacks)






  </script>
  <style>
  h1 {
     text-align: center;
     color: #000;
  }
  .search {
     padding: 20px;
     width: 50%;
     margin: 10px 225px 10px auto;
  }
  .monster_search {
     background-color: #3cb5f9;
     border: 1px solid #000!important;
  }
  </style>
</attacks_list>